<!DOCTYPE>
<html>
<head>
    <title>Runes Example</title>
    <script type="text/javascript" src="script/runes.js"></script>

    <script type="text/javascript" src="script/preprocession/runes.lexer.js"></script>
    <script type="text/javascript" src="script/preprocession/runes.lexer.es3.js"></script>

    <script type="text/javascript" src="script/preprocession/runes.parser.js"></script>
    <script type="text/javascript" src="script/preprocession/runes.parser.es3.js"></script>
    
    <script type="text/javascript" src="script/vm/runes.vm.js"></script>
    <script type="text/javascript" src="script/vm/runes.vm.es3.js"></script>
</head>
<body>
    <script type="text/javascript">
        function callAndCount(name, callback) {
            document.write(name + "<br>");
            var d = new Date().getTime();
            for (var i = 0; i < 1000; i++) {
                callback();
            }
            var e = (new Date().getTime() - d);
            document.write(e / 1000);
            document.write("ms rep one call :: " + e + "ms per 1000 calls" + "<br>");
        }
        var error = true;
        runes.onError = function (e) {
            if (error) document.write(e.message + "<br>");
            error = false;
        }
        callAndCount("one line - run", function () { runes.run("var ar = 3 + 2;") });
        callAndCount("one line - sprint", function () { runes.sprint("var as = 3 + 4;") });

        try {
            document.write("<br>" + ar);
            document.write("<br>" + as);
        } catch (e) {
            document.write("<br>" + e.message);
        }
    </script>
</body>
</html>
